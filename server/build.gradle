plugins {
    id 'java'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '1.2.2'
}

sourceCompatibility = 1.8

mainClassName = 'datchat.Main'
applicationDefaultJvmArgs = ["-Dspring.profiles.active=local"]

dependencies {
    compile vertx_core,
            vertx_web,
            mongodb_driver_async,
            jackson_databind,
            spring_context,
            spring_security_crypto,
            javax_inject,
            slf4j_api,
            slf4j_jcl_adapter,
            slf4j_logback,
            reflections,
            pojo_builder

    testCompile junit
}

jar {
    manifest {
        attributes('Main-Class': mainClassName)
    }
}

task stage {
    dependsOn shadowJar
}
